<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Producto</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Agregar Producto</h1>
        </div>
        <div class="agregar-producto-container">
            <label for="nombreProducto">Nombre del Producto:</label>
            <input type="text" id="nombreProducto" placeholder="Nombre del Producto">
            <label for="precioProducto">Precio del Producto (Bs):</label>
            <input type="number" id="precioProducto" placeholder="Precio del Producto">
            <button onclick="agregarProducto()">Agregar Producto</button>
            <div class="botones-container">
                <button onclick="location.href='index.html';">Volver</button>
            </div>
        </div>
    </div>

    <script>
        let productoIndex = 5;

        // Función para cargar productos personalizados desde localStorage
        function cargarProductosPersonalizados() {
            const productosPersonalizados = JSON.parse(localStorage.getItem('productosPersonalizados')) || [];
            productosPersonalizados.forEach(producto => agregarProductoDom(producto.nombre, producto.precio, producto.index));
        }

        // Función para guardar productos personalizados en localStorage
        function guardarProductosPersonalizados(productos) {
            localStorage.setItem('productosPersonalizados', JSON.stringify(productos));
        }

        // Función para agregar producto personalizado
        function agregarProducto() {
            const nombre = document.getElementById('nombreProducto').value.trim();
            const precio = parseFloat(document.getElementById('precioProducto').value);

            if (nombre === '' || isNaN(precio) || precio <= 0) {
                alert('Por favor, ingresa un nombre y un precio válido para el producto.');
                return;
            }

            const productosPersonalizados = JSON.parse(localStorage.getItem('productosPersonalizados')) || [];
            productoIndex++;
            productosPersonalizados.push({
                nombre: nombre,
                precio: precio,
                index: productoIndex
            });
            localStorage.setItem('productosPersonalizados', JSON.stringify(productosPersonalizados));

            alert('Producto agregado correctamente.');

            // Limpiar campos
            document.getElementById('nombreProducto').value = '';
            document.getElementById('precioProducto').value = '';

            // Agregar el producto en la interfaz de index.html (si está abierto)
            if (window.opener) {
                window.opener.agregarProductoDom(nombre, precio, productoIndex);
            }
        }

        // Cargar productos personalizados al cargar la página
        cargarProductosPersonalizados();
    </script>
</body>
</html>
